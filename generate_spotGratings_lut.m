function [mask]= generate_spotGratings_lut(orient,freq,TempFreq,phase0,contrast,duration, degPerPix,sizeX,sizeY, frameRate, black, white,sizeLut)%%% generate images for drifting gratings, without displaying them%%% based (loosely) on DriftDemo from psychtoolbox%%% cmn 11/05/05% windowgray = 0.5*(white+black);[x, y] = meshgrid(1:sizeX, 1:sizeY);[s1, s2] = size(x);maskuse = ones(s1, s2, 2) .* gray;rad = 12; % should be getting from dialog boxz = sqrt(x.^2 + y.^2);z = z(:);tst = z > rad^2;tst = tst*255;tst = reshape(tst,s1,s2);maskuse(:,:,2) = tst;% mask(:, :, 2)= spiral .* contrast;% Make our sprial  into a screen texture for drawingmaskTexture = Screen('MakeTexture', window, maskuse);